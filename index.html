<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snakes & Ladders - PLAYER HOST</title>
    <link rel="stylesheet" href="style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="peerjs.min.js"></script>
</head>
<body>
    <div id="game-layout">
        <aside id="status-panel">
            <h2 class="tiger-text">üêØ Rankings</h2>
            <div id="p2p-info" style="background: #1e293b; padding: 10px; border-radius: 8px; margin-bottom: 10px; border: 1px solid var(--accent);">
                <div style="font-size: 12px; text-align: center;">Room ID:</div>
                <div style="font-size: 12px; text-align: center;"><b id="my-id" style="color:white">Connecting...</b></div>
				<div style="font-size: 11px; text-align: center;">Viewers Connected: <span id="viewer-count" style="color:var(--accent)">0</span></div>
            </div>
            <div id="leaderboard-container">
                <table id="leaderboard">
                    <thead>
						<tr>
							<th>Player</th>
							<th>Pos</th>
							<th>Rolls Left</th>
							<th>Total Given</th>
							<th>Escapes</th>
						</tr>
					</thead>
                    <tbody id="player-rows"></tbody>
                </table>
            </div>
        </aside>

        <main id="board-area">
            <div id="board-container">
                <div id="board"></div>
                <svg id="svg-layer" viewBox="0 0 1000 1000">
                    <defs>                      
                      <linearGradient id="linearGradient25" x1="20%" y1="20%" x2="100%" y2="0%">
                        <stop offset="20%" style="stop-color:#884433;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#661111;stop-opacity:1" />
                      </linearGradient>                  
                                                                  
                        <filter id="snakeGlow" x="-50%" y="-50%" width="200%" height="200%">
                            <feGaussianBlur stdDeviation="4" result="blur" />
                            <feMerge>
                                <feMergeNode in="blur" />
                                <feMergeNode in="SourceGraphic" />
                            </feMerge>
                        </filter>

						<g id="tiger-template">			
							<g transform="rotate(90) translate(-50, -150)">
							<path d="m31 74c-10-1.1-15 22-3.4 16 0.61-4.7 13-9.9 5.5-2.4-9.4 7.8 8.7 20 8.8 5.7 5.1-12 16-18 28-23 9.3-5.5 18 2.9 25 9.1 7.6 9.8 24 6 28-5.1 2.9-13 17-5.8 21 2.2 5.6 7.5 16 14 25 9.7 9-2.1 8.6-15 17-16 12 2.2 14 18 27 20 12 3.3 20-6.5 24-16 7.4-14 19 1.6 25 8.8 4.6 4.4 13 17 19 12-6.7-8.9-15-16-23-24-7.6-9.2-27-11-28 4-6.3 13-24 9-30-2.8-5.7-9.4-21-14-26-1.7-3.6 8.3-14 17-20 5.8-6.5-7.1-14-18-25-16-10 3.6-12 22-25 18-11-1.4-3.7-18-14-21 5.3-2.4 7.5-14-0.37-8.3-10 5.3-25-6.9-31 5.6-2-6.1-6.5-20-16-14-7 5.8-24 3.8-26 14-0.31 8.7 4.3 17 13 20 0.74 0.34 1.5 0.68 2.3 1z" fill="#ffa500" stroke="#ff8100" stroke-linecap="round" stroke-width=".16"/>
							 <path d="m31 69c5.5 11 25-5.7 13-11-5.8-1.5-17 3.5-13 11z" fill="#f5f5dc" stroke="#ffbc99" stroke-linecap="round" stroke-width=".32"/>
							 <g stroke="#000" stroke-linecap="round">
							  <g stroke-width=".16">
							   <path d="m38 59c-7.5 9.2 11 4.6 0 0z"/>
							   <path d="m41 50c6.1 4.9-7.1 2 0 0z"/>
							   <path d="m28 58c-6.9-3.2 6.4-3.9 0 0z"/>
							   <path d="m18 50c5.4-10 11 9.4-0.16 1.6"/>
							   <path d="m47 36c-5.8 11 14 4.5 0 0z"/>
							  </g>
							  <path d="m37 68c1.8 2.9 4-1.4 2.7-3.1" fill="none" stroke-width="1.3"/>
							  <path d="m43 66c0.95 3.8-4.2 2.2-4.2-0.41" fill="none" stroke-width="1.3"/>
							  <g transform="rotate(-80,59,46)">
							   <g stroke-width=".16">
								<path d="m12 28c-6-0.098-0.14 8.7-0.32 0.71l0.48-0.55"/>
								<path d="m13 38c4.7-5.6-5.9-2.4 0 0.16"/>
								<path d="m25 45c4.6 4.9 4.4-8.8 0.01 0"/>
								<path d="m32 52c7.4-3.2 0.98-7.4-1.6-2l0.62 1.2 0.82 1"/>
								<path d="m36 59c12-3.1-5.8-7.2-0.16 0"/>
								<path d="m38 63c2.8 5.9 8.7-4.9 1.1-0.042-0.43 0.03-0.82-0.18-1.2-0.28"/>
								<path d="m52 79c-8.5-1.5-0.13 7.3 0 0.16"/>
								<path d="m64 76c-4.6-1.2-3.8 5.1 0.16 2.1"/>
								<path d="m61 70c-10 5.1 4.6 5.7 0 0z"/>
								<path d="m60 60c-1.3-6.5-7.5 3.9-0.48 0"/>
								<path d="m58 49c-1.7-6.9-12 4.5-3 0.35 0.92-0.11 2.1-0.91 3-0.19"/>
								<path d="m57 22c5.7-8-11 3.4 0 0z"/>
								<path d="m56 16c-1.9-5.8-4.1 1.1-5.5 2.9"/>
								<path d="m41 6.1c-7.8-0.062 5.3 9.5 0.28 0.38z"/>
								<path d="m35 17c-1.5-7.9-10-1.5 0 0z"/>
								<path d="m23 19c-6.2 7.5 4.9 9.2 0.16 0.32"/>
								<path d="m21 30c-7.2-2.5 0.45 13-0.59 1.2l0.18-0.74 0.57-0.51"/>
								<path d="m27 32c0.53 11-6.9-0.34 0 0z"/>
								<path d="m14 24c5 4.2 3.2-9.3 0.81-1.9"/>
								<path d="m56 16c-1.8 0.99-3.4 2.6-5.5 2.9"/>
								<path d="m44 45c7.3 2.2-1.7-9.1 0.64 0"/>
								<path d="m53 36c-0.41 7.2 8.9 3.6 0 0z"/>
								<path d="m59 23c-11 2.5 4.4 7.6-0.15 0"/>
								<path d="m59 65c-5.9 3.4-1.7-5.4-0.16 0"/>
								<path d="m51 68c4.1-5.8 7.3 6.6 0 0z"/>
								<path d="m47 80c-3.1 4.7-7.8-6.7-1.3-0.28l0.81 0.11 0.8-0.15"/>
								<path d="m31 91c8.9 5.9 3.9-6.7-0.16 0"/>
								<path d="m39 102c-1.8 5.7-12-2.6-4-0.64 1.6-1.2 4.8-3.3 4 0.64z"/>
								<path d="m47 115c7.5 0.085-3.2-10 0.32-2.2-1.2 0.068-1.8 3.1 0 2.2"/>
								<path d="m65 184c5.8-6.1-6.5-0.24-6.8-4.7"/>
								<path d="m37 112c5.4 1.1 7.3-7.8 0.61-2.7-2.6-0.12-3.2 2.6-0.4 2.7"/>
								<path d="m41 85c-6.3-1.4-2.2-8.4-0.32-0.32"/>
								<path d="m52 77c-5.8 2.6-3.6-8.3-0.55-0.68l0.57 0.22 0.61-0.027"/>
								<path d="m52 123c2.6 2 7 1.2 8.4-1.9"/>
								<path d="m53 118c6.3 0.8 4.5-9.4 0.48-0.32"/>
								<path d="m57 180c0.87 3 4.4 3.8 7.1 4"/>
							   </g>
							   <path d="m49 130c4.9-4 7.8 8 1.5 1.8l-0.83-0.84z" stroke-width=".15"/>
							   <path d="m50 140c-2 6.4-10-5.6-2.9 0.16 1.1 0.07 2.3 0.23 3.3-0.48" stroke-width=".19"/>
							   <path d="m37 152c9.7 4.5 2.9-7.3-0.16 0" stroke-width=".16"/>
							   <path d="m50 161c0.11 5.9-9.3 4-3.5 0.031 0.18-1.9 2.6-0.077 3.5-0.031z" stroke-width=".16"/>
							   <path d="m55 170c8.3 0.94-2.2-13 0.25-2.9-0.76 0.69-2.3 3.7 0.072 2.9" stroke-width=".19"/>
							   <g stroke-width=".16">
								<path d="m61 173c6.2 1.9 6.1-8.3 0.32-0.33"/>
								<path d="m62 225c7.3 0.34-3-9.2 0.32-1.9-2-0.56-2 2.6 0 1.9"/>
								<path d="m70 229c7-0.75 2.4-7.8 0-0.16"/>
								<path d="m74 239c-7.1 0.65-0.65-6.1-0.16 0"/>
								<path d="m54 196c-0.98 5.9-9.6-3.6-2.6 0.46l1.4-0.22 1.3-0.56"/>
								<path d="m53 213c-1.6 5.9-11 0.74-2.2-0.89 0.39-2 2.8-1.6 2.2 0.89z"/>
								<path d="m43 208c10 2.6 1.5-7.7-0.16 0"/>
							   </g>
							   <path d="m64 244c4.5-2.9 3.8 10 0 0z" stroke-width=".1"/>
							   <path d="m60 249c5 4-2.7 3.1 0-0.48" stroke-width=".18"/>
							   <path d="m61 259c-6.5 3.4-7.3-6.7-0.5-0.2" stroke-width=".16"/>
							  </g>
							 </g>
							 </g>
						</g>
                        <g id="new-artwork-template">
							<g transform="translate(-150, -50)">
                          <path id="body" style="fill:url(#linearGradient25); stroke:#ffffff; stroke-width:1;" 
                                 d="m 40.4,61
                                    c -0.8,-4 -0.8,-4 0.4,-7.8
                                      1.2,-3.8 14.6,-10.6 21.4,-11.6
                                      7,-1 11.4,1.4 17.4,3.8
                                      6,2.4 8.8,3.6 17.4,11
                                      8.6,7.4 7.8,34.2 31.2,35.6
                                      23.4,1.4 49.8,-62 73.6,-62
                                      23.6,0 47.2,46.2 69,45
                                      21.8,-1.2 27.6,-39 37,-49.6
                                      9.4,-10.6 15.2,-11 20,-9.4
                                      4.8,1.6 -2.6,-4.6 -10.6,10.6
                                      -8,15.2 -17.8,41 -22.6,48
                                      -4.8,7 -17,19.4 -34,16.6
                                      -17,-2.6 -46,-41.4 -58.2,-41.2
                                      -12.2,0.2 -50.4,58.8 -67.6,59.2
                                      -17.2,0.4 -12.2,1.8 -25.4,-4.8
                                      -13.4,-6.8 -21.6,-41.4 -29,-40.8
                                      -7.4,0.6 -3.4,4.6 -15.2,6.2
                                      -12,1.6 -21.6,-4.2 -24.8,-9
                                      0,0 0.8,4.2 0,0.2
                                    z" />
                          <ellipse id="eye1" style="fill:#fff;" cx="58.6" cy="46" rx="2.8" ry="1.4" />
                          <ellipse id="eye2" style="fill:#fff;" cx="58.6" cy="66.6" rx="2.8" ry="1.4" />
                        </g>            
					</g>
                    </defs>
                </svg>
                <div id="tokens-layer"></div>
            </div>
        </main>

        <aside id="control-panel">
            <section id="player-controls">
                <h2 class="tiger-text">üé≤ Game Controls</h2>
                <div class="control-card active-turn">
                    <div id="turn-indicator">Waiting...</div>
                    <div id="roll-counter">Rolls available: 0</div>
                    <div id="dice-result">üé≤ -</div>
					<button id="roll-btn" class="primary-btn" onclick="handleRollClick()">üé≤ Digital Roll</button>
					<button id="manual-roll-btn" class="secondary-btn" onclick="handleManualRoll()" style="background: #6366f1;">‚úçÔ∏è Manual Entry</button>
					<button id="pass-btn" class="secondary-btn" onclick="nextTurn()">END TURN / PASS</button>
                </div>
            </section>

            <section id="admin-panel">
                <h3>üõ† Administrator</h3>
                <div id="admin-login-ui">
                    <input type="password" id="admin-pass" placeholder="Password">
                    <button class="login-btn" onclick="loginAdmin()">Login</button>
                </div>
                <div id="admin-tools" class="hidden">
                    <div class="admin-group">
                        <label>Rolls to Grant:</label>
                        <input type="number" id="grant-amt" value="5" min="1">
                    </div>
                    <button class="admin-btn" onclick="grantRollsToAll()">Give to All</button>
                    <div class="admin-group">
                        <select id="select-player"></select>
                        <button class="admin-btn" onclick="grantRollsToSpecific()">Give to Selected</button>
                    </div>
                    <div class="admin-group" style="margin-top: 15px; border-top: 1px solid #334155; padding-top: 15px;">
                    <button class="admin-btn save-btn" onclick="saveGameState()">üíæ Save Game to File</button>
                    <label for="load-file" class="admin-btn load-label">üìÇ Load Game File</label>
                    <input type="file" id="load-file" accept=".json" onchange="loadGameState(event)" style="display:none;">
					<div class="admin-controls" style="margin-top: 10px; border-top: 1px solid #ddd; padding-top: 10px;">
						<p><strong>Debug Tools:</strong></p>
						<button class="secondary-btn" onclick="debugSnake()" style="background:#ef4444; color:white; padding:5px;">Test Snake</button>
						<button class="secondary-btn" onclick="debugLadder()" style="background:#10b981; color:white; padding:5px;">Test Ladder</button>
						<button class="secondary-btn" onclick="toggleAutoplay()" style="background: #8b5cf6;">ü§ñ Toggle Autoplay</button>
                    </div>
					</div><button class="logout-btn" onclick="logoutAdmin()">Logout Admin</button>
                </div>
            </section>
            </aside>
    </div>

    <div id="event-modal" class="modal-overlay hidden">
        <div class="modal-content"><h2 id="modal-title"></h2><p id="modal-text"></p><button id="modal-confirm-btn" class="primary-btn" style="display: inline-block;">OK</button></div>
    </div>
    <div id="fireworks-container" class="hidden"></div>

    <audio id="dice-sound" src="dice-142528.mp3"></audio>
    <audio id="hiss-sound" src="SnakeHiss.mp3"></audio>
    <audio id="tiger-roar" src="tiger-roar-loudly-193229.mp3"></audio>
    <audio id="firework-sound" src="fireworks-402788.mp3" loop></audio>

    <script src="script.js"></script>
</body>
</html>
